"use strict";const body=document.body,header=document.querySelector(".header"),menuBurger=document.querySelector(".header__burger"),hmLinks=document.querySelectorAll(".header-nav li a");menuBurger&&(menuBurger.onclick=function(){body.classList.toggle("no-scroll"),menuBurger.classList.toggle("open"),header.classList.toggle("mobile-menu-opened")});for(let e of hmLinks)e.addEventListener("click",()=>{body.classList.remove("no-scroll"),menuBurger.classList.remove("open"),header.classList.remove("mobile-menu-opened")});const upButton=document.querySelector(".up-btn"),faqItems=(window.addEventListener("scroll",()=>{200<window.scrollY?upButton.classList.remove("hide"):upButton.classList.add("hide")}),upButton.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),document.querySelectorAll(".faq-item")),popupOverlay=(faqItems.forEach(e=>{var t=e.querySelector(".faq-item__question");const s=e.querySelector(".faq-item__answer");t.addEventListener("click",()=>{s.style.maxHeight?(s.style.maxHeight=null,e.classList.remove("faq-item--active")):(s.style.maxHeight=s.scrollHeight+"px",e.classList.add("faq-item--active"))})}),document.querySelectorAll('[data-modal="request"]').forEach(e=>{e.addEventListener("click",()=>{var e=document.getElementById("request");e&&e.scrollIntoView({behavior:"smooth"})})}),document.querySelectorAll(".courses-box").forEach(e=>{const s=e.querySelectorAll(".courses-level-btn"),r=e.querySelectorAll(".courses-tab");s.forEach(e=>{e.addEventListener("click",()=>{s.forEach(e=>e.classList.remove("courses-level-btn--active")),e.classList.add("courses-level-btn--active");const t=Array.from(e.classList).find(e=>e.startsWith("courses-level-btn--")&&"courses-level-btn--active"!==e)?.split("--")[1];r.forEach(e=>{e.classList.contains("courses-tab--"+t)?e.style.display="block":e.style.display="none"})})})}),document.querySelector(".popup-overlay"));if(popupOverlay){const p=document.querySelectorAll("[data-teacher]"),q=popupOverlay.querySelectorAll(".popup-close"),r=popupOverlay.querySelectorAll(".zp-btn"),s=()=>{popupOverlay.classList.remove("active"),popupOverlay.querySelectorAll(".popup").forEach(e=>e.classList.remove("active"))};p.length&&p.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();e="teacher-popup--"+t.dataset.teacher.replace("teacher-",""),e=document.getElementById(e);e&&(s(),e.classList.add("active"),popupOverlay.classList.add("active"))})}),q.length&&q.forEach(e=>{e.addEventListener("click",()=>{s()})}),popupOverlay.addEventListener("click",e=>{e.target===popupOverlay&&s()}),r.length&&r.forEach(e=>{e.addEventListener("click",()=>{s()})})}document.querySelectorAll(".main-form").forEach(s=>{const r=s.querySelectorAll(".main-input"),o=s.querySelector(".main-submit"),l=s.querySelector(".success-message");let a=!1;const c=()=>{let l=!0;return r.forEach(e=>{var t=e.hasAttribute("required"),s=e.value.trim();let r=t&&""===s?!1:!0;e.placeholder.includes("электронной почты")&&s&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(r=!1)),e.placeholder.includes("телефона")&&!/^[\d\+\-\s\(\)]{7,}$/.test(s)&&(r=!1),a&&e.classList.toggle("invalid",!r),r||(l=!1)}),o.disabled=!l,l};r.forEach(e=>{e.addEventListener("input",()=>{c()})}),s.addEventListener("submit",async e=>{if(e.preventDefault(),a=!0,c()){e=new FormData;e.append("your-name",r[0].value.trim()),e.append("your-tel",r[1].value.trim()),o.disabled=!0;try{var t=await(await fetch("send.php",{method:"POST",body:e})).json();"success"===t.result?(s.reset(),o.disabled=!0,l.classList.add("show"),s.classList.add("success"),setTimeout(()=>{l.classList.remove("show"),s.classList.remove("success")},7e3)):(alert(t.info||"Произошла ошибка. Повторите попытку позже."),console.error(t.desc||""))}catch(e){alert("Ошибка отправки. Попробуйте позже."),console.error(e)}finally{o.disabled=!1}}}),c()});